<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:int="http://www.springframework.org/schema/integration"
   xmlns:ix= "http://www.springframework.org/schema/integration/xml"
   xmlns:util="http://www.springframework.org/schema/util"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:int-ws="http://www.springframework.org/schema/integration/ws"
   xmlns:ws="http://www.springframework.org/schema/web-services"
   xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/integration	http://www.springframework.org/schema/integration/spring-integration.xsd
       http://www.springframework.org/schema/integration/xml	http://www.springframework.org/schema/integration/xml/spring-integration-xml.xsd
       http://www.springframework.org/schema/util		http://www.springframework.org/schema/util/spring-util.xsd
       http://www.springframework.org/schema/context       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/integration/ws    http://www.springframework.org/schema/integration/ws/spring-integration-ws.xsd
       http://www.springframework.org/schema/web-services      http://www.springframework.org/schema/web-services/web-services.xsd
   ">

   <!-- Sprint Integration gateway МФО "Запрос на экспорт показателей контрагента" -->
   <int-ws:inbound-gateway id="WS-FinRepGetParticipantFactors"
                           reply-channel="FIN.REPORT.KKMB.GET.PARTICIPANT.FACTORS.RESPONSE"
                           request-channel="FIN.REPORT.KKMB.GET.PARTICIPANT.FACTORS.REQUEST"
                           reply-timeout="30000"
   />

   <!-- Sprint Integration gateway МФО "Запрос на экспорт показателей консалидированной группы" -->
   <int-ws:inbound-gateway id="WS-FinRepGetGCFactors"
                           reply-channel="FIN.REPORT.KKMB.GET.GC.FACTORS.RESPONSE"
                           request-channel="FIN.REPORT.KKMB.GET.GC.FACTORS.REQUEST"
                           reply-timeout="30000"
   />

   <!-- Sprint Integration gateway МФО "Запрос на экспорт показателей проектов" -->
   <int-ws:inbound-gateway id="WS-FinRepGetProjectFactors"
                           reply-channel="FIN.REPORT.KKMB.GET.PROJECT.FACTORS.RESPONSE"
                           request-channel="FIN.REPORT.KKMB.GET.PROJECT.FACTORS.REQUEST"
                           reply-timeout="30000"
   />

    <!-- Sprint Integration gateway АМРЛиРТ "Расчет лимитов" -->
    <int-ws:inbound-gateway id="WS-AMRLiRTCalculateLimits"
                            reply-channel="AMRLIRT.KKMB.CALCULATE.LIMITS.RESPONSE"
                            request-channel="AMRLIRT.KKMB.CALCULATE.LIMITS.REQUEST"
                            reply-timeout="30000"
    />

   <!-- Входной и выходной каналы для ws "Запрос на экспорт показателей контрагента" -->
   <int:channel id="FIN.REPORT.KKMB.GET.PARTICIPANT.FACTORS.REQUEST">
       <int:interceptors>
              <int:wire-tap channel="toGateLoggerFinReportGetParticipantFactors"/>
       </int:interceptors>
   </int:channel>

   <int:channel id="FIN.REPORT.KKMB.GET.PARTICIPANT.FACTORS.RESPONSE">
       <int:interceptors>
              <int:wire-tap channel="fromGateLoggerFinReportGetParticipantFactors"/>
       </int:interceptors>
   </int:channel>

   <!-- Входной и выходной каналы для ws "Запрос на экспорт показателей консалидированной группы" -->
   <int:channel id="FIN.REPORT.KKMB.GET.GC.FACTORS.REQUEST">
       <int:interceptors>
              <int:wire-tap channel="toGateLoggerFinReportGetGCFactors"/>
       </int:interceptors>
   </int:channel>

   <int:channel id="FIN.REPORT.KKMB.GET.GC.FACTORS.RESPONSE">
       <int:interceptors>
              <int:wire-tap channel="fromGateLoggerFinReportGetGCFactors"/>
       </int:interceptors>
   </int:channel>

   <!-- Входной и выходной каналы для ws "Запрос на экспорт показателей проектов" -->
   <int:channel id="FIN.REPORT.KKMB.GET.PROJECT.FACTORS.REQUEST">
       <int:interceptors>
              <int:wire-tap channel="toGateLoggerFinReportGetProjectFactors"/>
       </int:interceptors>
   </int:channel>

   <int:channel id="FIN.REPORT.KKMB.GET.PROJECT.FACTORS.RESPONSE">
       <int:interceptors>
              <int:wire-tap channel="fromGateLoggerFinReportGetProjectFactors"/>
       </int:interceptors>
   </int:channel>

    <!-- Входной и выходной каналы для ws АМРЛиРТ "Расчет лимитов" -->
   <int:channel id="AMRLIRT.KKMB.CALCULATE.LIMITS.REQUEST">
       <int:interceptors>
              <int:wire-tap channel="toGateLoggerFinReportGetProjectFactors"/>
       </int:interceptors>
   </int:channel>

   <int:channel id="AMRLIRT.KKMB.CALCULATE.LIMITS.RESPONSE">
       <int:interceptors>
              <int:wire-tap channel="fromGateLoggerFinReportGetProjectFactors"/>
       </int:interceptors>
   </int:channel>

   <!-- настройка логгеров2 -->
   <int:logging-channel-adapter id="fromGateLoggerFinReportGetParticipantFactors" logger-name="fromGateLoggerFinReportGetParticipantFactors"/>
   <int:logging-channel-adapter id="toGateLoggerFinReportGetParticipantFactors" logger-name="toGateLoggerFinReportGetParticipantFactors"/>

   <!-- настройка логгеров3 -->
   <int:logging-channel-adapter id="fromGateLoggerFinReportGetGCFactors" logger-name="fromGateLoggerFinReportGetGCFactors"/>
   <int:logging-channel-adapter id="toGateLoggerFinReportGetGCFactors" logger-name="toGateLoggerFinReportGetGCFactors"/>

   <!-- настройка логгеров4 -->
   <int:logging-channel-adapter id="fromGateLoggerFinReportGetProjectFactors" logger-name="fromGateLoggerFinReportGetProjectFactors"/>
   <int:logging-channel-adapter id="toGateLoggerFinReportGetProjectFactors" logger-name="toGateLoggerFinReportGetProjectFactors"/>

   <beans:bean id="defHeaderMapper" class="org.springframework.integration.jms.DefaultJmsHeaderMapper"/>

   <beans:bean id="FinRep_GetParticipantFactors" class="ru.sbt.bpm.mock.bean.RefreshableXSLTransformer">
       <beans:property name="xslPath" value="/WEB-INF/xsl/FinRep/GetParticipantFactors.xsl"/>
   </beans:bean>
   <beans:bean id="FinRep_GetGCFactors" class="ru.sbt.bpm.mock.bean.RefreshableXSLTransformer">
       <beans:property name="xslPath" value="/WEB-INF/xsl/FinRep/GetGCFactors.xsl"/>
   </beans:bean>
   <beans:bean id="FinRep_GetProjectFactors" class="ru.sbt.bpm.mock.bean.RefreshableXSLTransformer">
       <beans:property name="xslPath" value="/WEB-INF/xsl/FinRep/GetProjectFactors.xsl"/>
   </beans:bean>

    <int:transformer input-channel="FIN.REPORT.KKMB.GET.PARTICIPANT.FACTORS.REQUEST" output-channel="FIN.REPORT.KKMB.GET.PARTICIPANT.FACTORS.RESPONSE" method="transform" ref="FinRep_GetParticipantFactors"/>
    <int:transformer input-channel="FIN.REPORT.KKMB.GET.GC.FACTORS.REQUEST" output-channel="FIN.REPORT.KKMB.GET.GC.FACTORS.RESPONSE" method="transform" ref="FinRep_GetGCFactors"/>
    <int:transformer input-channel="FIN.REPORT.KKMB.GET.PROJECT.FACTORS.REQUEST" output-channel="FIN.REPORT.KKMB.GET.PROJECT.FACTORS.RESPONSE" method="transform" ref="FinRep_GetProjectFactors"/>

</beans:beans>