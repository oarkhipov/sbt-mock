<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:int="http://www.springframework.org/schema/integration"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns="http://www.springframework.org/schema/beans"
             xsi:schemaLocation="http://www.springframework.org/schema/beans		http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/integration	http://www.springframework.org/schema/integration/spring-integration.xsd
		http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd">

    <import resource="../contextConfigs/base-config.xml"/>
    <import resource="../contextConfigs/logging-config.xml"/>

    <!-- - - - -  - - - - -  - - - - -  - - - - -  - - - - -  - - - - -  - - - - -  - - - - -  - - - - -  - - - - -  - - - - -  - - - - -  - -->
    <!-- DEPENDS ON SYSTEM-->

    <int:channel id="testChannel"/>
    <int:channel id="testChannelAggregated"/>

    <int:service-activator input-channel="testChannel" output-channel="testChannelAggregated" method="aggregate">
        <bean class="ru.sbt.bpm.mock.spring.bean.MessageAggregator">
            <constructor-arg value="test endpoint" type="java.lang.String"/>
        </bean>
    </int:service-activator>

    <int:gateway id="systemEntry"
             error-channel="testChannelAggregated"
             service-interface="ru.sbt.bpm.mock.spring.integration.gateway.ClientService"
             default-reply-timeout="1000"
             default-request-timeout="1000"
        >
        <int:method name="sendMockMessage" request-channel="testChannel" reply-channel="testChannelAggregated"/>
    </int:gateway>

</beans>